# [Gold III] 계보 복원가 호석 - 21276 

[문제 링크](https://www.acmicpc.net/problem/21276) 

### 성능 요약

메모리: 140312 KB, 시간: 928 ms

### 분류

방향 비순환 그래프, 자료 구조, 그래프 이론, 해시를 사용한 집합과 맵, 정렬, 위상 정렬

### 제출 일자

2024년 4월 12일 14:23:33

### 문제 설명

<p>석호촌에는 <em>N</em> 명의 사람이 살고 있다. 굉장히 활발한 성격인 석호촌 사람들은 옆 집 상도 아버님, 뒷집 하은 할머님 , 강 건너 유리 어머님 등 모두가 한 가족처럼 살아가고 있다.</p>

<p>그러던 어느 날, 유구한 역사를 지닌 석호촌의 도서관에 화재가 나서 계보들이 모두 불타고 말았다. 그래도 계보는 있어야 하지 않겠느냐는 마을 어르신인 대일 촌장님의 의견에 따라 석호촌 사람들은 계보 복원가 호석에게 의뢰를 맡기기로 했다.</p>

<p>적어도 현재를 함께 살아가는 <em>N</em> 명의 계보는 복원하고 싶은 호석이는 조사를 통해서 각자가 기억하는 조상들의 이름들을 구해냈다. 다행히도 석호촌의 맑은 정기 덕분에 기억력이 굉장히 좋은 주민들은<strong> 모든 조상을 완벽하게 기억하고 있다.</strong> 또한, 각 가문은 한 명의 시조를 root로 하는 트리 형태를 띈다는 것도 알아냈다. 이 때 "조상"이란, "자신의 부모"와 "부모의 조상"을 모두 합친 것을 의미한다.</p>

<p>이를 기반으로 몇 개의 가문이 존재했는 지, 각 가문에 대한 정보를 출력하는 프로그램을 작성해서 호석이를 도와주자!</p>

### 입력 

 <p>첫번째 줄에 석호촌에 살고 있는 사람의 수 <em>N</em> 이 주어진다. 두번째 줄에는 현재 살고 있는 사람들의 이름이 차례대로 주어진다. 모든 이름은 길이 1 이상 6 이하의 알파벳 소문자로 이뤄지며, 중복된 이름은 존재하지 않는다.</p>

<p>세번째 줄에는 기억하는 정보의 개수 <em>M</em> 이 주어진다. 이어지는 <em>M</em>개의 줄에는 "<em>X Y</em>" 꼴로 기억들이 주어지는데, 이는 곧 <em>X</em>의 조상 중에 <em>Y</em>가 있다는 것을 의미하며 같은 정보가 중복되어 주어지지 않는다. 입력에 모순이 있는 경우는 주어지지 않는다.</p>

### 출력 

 <p>첫번째 줄에는 가문의 개수 <em>K</em> 를 출력하라. 두 번째 줄에는 각 가문의 시조들의 이름을 공백으로 구분하여 사전순으로 출력하라.</p>

<p>세번째 줄부터는 이름의 사전순 대로 사람의 이름과 자식의 수, 그리고 사전순으로 자식들의 이름을 공백으로 구분하여 출력하라.</p>

